angular.module("ngchangeStatus",[]).directive("changeStatus",["$http","$q",function(a,b){return{scope:{id:"@id",currentvalue:"=value",apiurl:"@apiurl",apiurltype:"@apiurltype",actiontype:"@actiontype",fullscope:"=fullscope",deleteindex:"@dindex"},link:function(b,c,d){c.bind("click",function(){var c="update";appdata={id:d.id,currentvalue:b.currentvalue},apiurl=d.apiurl;var e=window.location.protocol+"//"+window.location.hostname+window.location.pathname,f=apiurl||e;if(void 0==d.apiurltype||"relative"==d.apiurltype)var f=e+f;void 0==d.actiontype&&"delete"!=d.actiontype||(c="delete");var g=a({method:"post",url:f,data:{appdata:appdata}});return g.then(function(e){"delete"==c?void 0!=b.fullscope&&void 0!=d.dindex&&b.fullscope.splice(d.dindex,1):void 0!=e.data.updatedvalue&&(b.currentvalue=e.data.updatedvalue)},function(b){console.log("something wrong")}),!0})}}}]);